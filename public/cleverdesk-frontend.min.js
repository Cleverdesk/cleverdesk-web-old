frontendApp=angular.module("frontendApp",["ngRoute"]);frontendApp.controller("frontendCtrl",function($scope,$log,communicator){});frontendApp.config(function($routeProvider,$locationProvider){$routeProvider.when("/",{templateUrl:"src/html/templates/main.html",controller:"MainController"}).when("/:plugin/:page",{templateUrl:"src/html/templates/page.html",controller:"PageController"})});frontendApp.controller("MainController",function($scope,$log,communicator){communicator.getPages().then(function(pages){$scope.pages=pages;$scope.$apply()})});frontendApp.controller("PageController",function($scope,$log,$routeParams,communicator,parser){communicator.getPage($routeParams.plugin,$routeParams.page).then(function(page){parser.parsePage(page).then(function(components){$scope.components=components;$scope.$apply()})})});frontendApp.directive("cleverCheckbox",function(){return{templateUrl:"/src/html/directives/checkbox.html",restrict:"E",scope:{name:"=name",value:"=value",label:"=label"}}});frontendApp.directive("cleverHtml",function(){return{templateUrl:"/src/html/directives/htmlView.html",restrict:"E",scope:{icode:"=code"},controller:function($scope,$sce){$scope.code=$sce.trustAs($sce.HTML,$scope.icode)}}});frontendApp.directive("cleverImage",function(){return{templateUrl:"/src/html/directives/image.html",restrict:"E",scope:{iurl:"=url"},controller:function($scope,$sce){$scope.url=$sce.trustAs($sce.URL,$scope.iurl)}}});frontendApp.directive("cleverInputfield",function(){return{templateUrl:"/src/html/directives/inputField.html",restrict:"E",scope:{name:"=name",value:"=value",label:"=label",placeholder:"=placeholder"}}});frontendApp.directive("cleverLabel",function(){return{templateUrl:"/src/html/directives/label.html",restrict:"E",scope:{text:"=text"}}});frontendApp.directive("cleverTextarea",function(){return{templateUrl:"/src/html/directives/Textarea.html",restrict:"E",scope:{name:"=name",value:"=value",label:"=label",placeholder:"=placeholder"}}});frontendApp.directive("cleverYoutube",function(){return{templateUrl:"/src/html/directives/youtube.html",restrict:"E",scope:{iurl:"=url",width:"=width",height:"=height"},controller:function($scope,$sce){var patt=/https:\/\/www\.youtube\.com\/watch\?v=(.*)/;var test=patt.test($scope.iurl);if(test==true){var id=patt.exec($scope.iurl)[1];$scope.eurl="https://www.youtube.com/embed/"+id}if(test==false){$scope.urlError=true}$scope.url=$sce.trustAs($sce.RESOURCE_URL,$scope.eurl);$scope.width=420;$scope.height=315}}});frontendApp.factory("communicator",function($http){return{getPages:function(){return new Promise(function(resolve,reject){$http({method:"GET",url:"/backend/pages"}).then(function successCallback(response){if(response.data.status==200){resolve(response.data.body)}else{reject("Non 200 Status ("+response.data.status+")")}},function errorCallback(response){reject("Error ("+response.status+")")})})},getPage:function(plugin,page){return new Promise(function(resolve,reject){$http({method:"GET",url:"/backend/"+plugin+"/"+page}).then(function successCallback(response){if(response.data.status==200){resolve(response.data.body)}else{reject("Non 200 Status ("+response.data.status+")")}},function errorCallback(response){reject("Error ("+response.status+")")})})}}});frontendApp.factory("parser",function($sce){return{parsePage:function(page){return new Promise(function(resolve,reject){var components=page.components;resolve(components)})}}});